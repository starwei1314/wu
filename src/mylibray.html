<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0">
     -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>我的图书馆</title>
    <link rel="stylesheet" href="plugin/css/bootstrap.min.css">
    <link rel="stylesheet" media="screen and (max-width:1200px)" href="plugin/css/mobileReset.css">
    <link rel="stylesheet" media="screen and (min-width:1200px)" type="text/css" href="plugin/css/reset.css" />
    <link rel="stylesheet" media="screen and (max-width:1200px)" href="plugin/css/mobileCommon.css">
    <link rel="stylesheet" media="screen and (min-width:1200px)" href="plugin/css/common.css">
    <link rel="stylesheet" href="plugin/fonts/iconfont.css">
    <link rel="stylesheet" media="screen and (max-width:1200px)" type="text/css" href="styles/mobileMylibary.css" />
    <link rel="stylesheet" media="screen and (min-width:1200px)" type="text/css" href="styles/mylibray.css" />
</head>

<body>
    <div class="header "></div>
    <div class="main w">
        <div class="main-tab">
            <p><a href="Index.html"> 首页 </a> / 我的图书馆</p>
        </div>
        <div class="main-user">
            <div class="profile">
                <span><img src="images/mylibray/gerenxinxi.png" alt="" /> 个人信息</span
          >
          <span class="updata"> <a href="#">更新资料</a> </span>
            </div>
            <div class="clearfix">
                <div class="profile-left fl">
                    <p>欢迎来到我的图书馆</p>
                    <p>
                        上次登录 <span>2019/02/02</span> 您已经
                        <span>8</span> 天没有到馆了
                    </p>
                    <div class="clearfix">
                        <div class="fl touxiang"><img src="" alt="" /></div>
                        <div class="fl">
                            <ul>
                                <li><span>读者姓名</span> 张三刀</li>
                                <li>
                                    <span>读者等级</span>
                                    <img src="images/mylibray/dengji.png" alt="" /><img src="images/mylibray/dengji.png" alt="" />
                                </li>
                                <li><span>证卡有效期</span> <i>2019-02-02</i></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="profile-right fl">
                    <ul class="clearfix">
                        <li>
                            <div class="messageicon">
                                <img src="images/mylibray/xiaoxi.png" alt="" />
                            </div>
                            <div><span>4</span>条</div>
                            <p>消息通知</p>
                            <div class="more">
                                <a href="#"><img src="images/mylibray/more.png" alt="" /></a>
                            </div>
                        </li>
                        <li>
                            <div class="messageicon">
                                <img src="images/mylibray/qiankuan.png" alt="" />
                            </div>
                            <div><span>4</span>元</div>
                            <p>当前欠款</p>
                            <div class="more">
                                <a href="#"><img src="images/mylibray/more.png" alt="" /></a>
                            </div>
                        </li>
                        <li>
                            <div class="messageicon">
                                <img src="images/mylibray/jieyue.png" alt="" />
                            </div>
                            <div><span>4</span>本</div>
                            <p>当前借阅</p>
                            <div class="more">
                                <a href="#"><img src="images/mylibray/more.png" alt="" /></a>
                            </div>
                        </li>
                        <li>
                            <div class="messageicon">
                                <img src="images/mylibray/yuyue.png" alt="" />
                            </div>
                            <div><span>4</span>本</div>
                            <p>图书预约</p>
                            <div class="more">
                                <a href="#"><img src="images/mylibray/more.png" alt="" /></a>
                            </div>
                        </li>
                        <li>
                            <div class="messageicon">
                                <img src="images/mylibray/xiaoxi.png" alt="" />
                            </div>
                            <div><span>4</span>条</div>
                            <p>消息通知</p>
                            <div class="more">
                                <a href="#"><img src="images/mylibray/more.png" alt="" /></a>
                            </div>
                        </li>
                        <li>
                            <div class="messageicon">
                                <img src="images/mylibray/xiaoxi.png" alt="" />
                            </div>
                            <div><span>4</span>条</div>
                            <p>消息通知</p>
                            <div class="more">
                                <a href="#"><img src="images/mylibray/more.png" alt="" /></a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="main-serve">
            <ul class="clearfix ">
                <li class="action">
                    <div class="serve-center">
                        <a href="#">
                            <img src="images/mylibray/dangqianjieyue.png" alt="" />
                            <p>当前借阅</p>
                        </a>
                    </div>
                </li>
                <li>
                    <div class="serve-center">
                        <a href="#">
                            <img src="images/mylibray/lishijieyue.png" alt="" />
                            <p>历史借阅</p>
                        </a>
                    </div>
                </li>
                <li>
                    <div class="serve-center">
                        <a href="#">
                            <img src="images/mylibray/zuoweiyuyue.png" alt="" />
                            <p>座位预约</p>
                        </a>
                    </div>
                </li>
                <li>
                    <div class="serve-center">
                        <a href="#">
                            <img src="images/mylibray/yanjiushi.png" alt="" />
                            <p>研修室预约</p>
                        </a>
                    </div>
                </li>
                <li>
                    <div class="serve-center">
                        <a href="#">
                            <img src="images/mylibray/tushujiangou.png" alt="" />
                            <p>图书荐购</p>
                        </a>
                    </div>
                </li>
                <li>
                    <div class="serve-center">
                        <a href="#">
                            <img src="images/mylibray/dianziziyuan.png" alt="" />
                            <p>电子资源</p>
                        </a>
                    </div>
                </li>
                <li>
                    <div class="serve-center">
                        <a href="#">
                            <img src="images/mylibray/wenxianchuandi.png" alt="" />
                            <p>文献传递</p>
                        </a>
                    </div>
                </li>
            </ul>
        </div>
        <div class="main-table">
            <div class="table-head ">
                <img src="images/mylibray/xujie.png" alt="" /> 续借/已借
            </div>
            <div class="table">
                <button class="allSelect">全部续借</button>
                <table class="detail_tb">
                    <thead>
                        <tr class="fied_header">
                            <th width="100">
                                <input type="checkbox" value="number" id="number" />全选
                            </th>
                            <th width="600">书名</th>
                            <th width="300">还书时间</th>
                            <th width="200">操作</th>
                        </tr>
                    </thead>
                    <tbody id="tbody">
                        <tr>
                            <td width="100">
                                <input type="checkbox" value="" id="" /><span></span>
                            </td>
                            <td width="600">张三</td>
                            <td width="300">2019/07/05</td>
                            <td width="200"><button>续借</button></td>
                        </tr>
                        <tr class="now">
                            <td width="100">
                                <input type="checkbox" value="" id="" /><span></span>
                            </td>
                            <td width="600">张四</td>
                            <td width="300">2019/07/05</td>
                            <td width="200"><button>续借</button></td>
                        </tr>
                        <tr>
                            <td width="100">
                                <input type="checkbox" value="" id="" /><span></span>
                            </td>
                            <td width="600">张四</td>
                            <td width="300">2019/07/05</td>
                            <td width="200"><button>续借</button></td>
                        </tr>
                    </tbody>

                    <tbody></tbody>
                </table>
                <div class="mobileBooks">
                    <ul>
                        <li class="clearfix">
                            <div class="mobileBook_left fl">
                                <h3>现代性的谱系 / 张凤阳著</h3>
                                <p>2019-07-10 15:50</p>
                            </div>
                            <div class="mobileBook_right fr">
                                <button>续借</button>
                            </div>
                        </li>
                        <li class="clearfix">
                            <div class="mobileBook_left fl">
                                <h3>现代性的谱系 / 张凤阳著</h3>
                                <p>2019-07-10 15:50</p>
                            </div>
                            <div class="mobileBook_right fr">
                                <button>续借</button>
                            </div>
                        </li>
                        <li class="clearfix">
                            <div class="mobileBook_left fl">
                                <h3>现代性的谱系 / 张凤阳著</h3>
                                <p>2019-07-10 15:50</p>
                            </div>
                            <div class="mobileBook_right fr">
                                <button>续借</button>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- echarts图表部分 -->
        <div class="data-display clearfix">
            <div class="data-left fl">
                <div class="data-top">
                    <img src="images/mylibray/yueduleixing.png" alt="" />阅读类型
                    <span>单位 ：本</span>
                </div>
                <div class="data-main">
                    <div id="bookNum"></div>
                </div>
            </div>
            <div class="data-right fr">
                <div class="data-top">
                    <img src="images/mylibray/shichang.png" alt="" />在馆时间
                    <span>单位 ：小时</span>
                </div>
                <div class="data-main">
                    <div id="timeNum"></div>
                </div>
            </div>
        </div>
        <!-- 阅读类型推荐 -->
        <div class="book-display clearfix">
            <div class="book-left fl">
                <div class="book-top">
                    <img src="images/mylibray/yueduleixing.png" alt="" /> 热门推荐
                </div>
                <div class="book-main">
                    <ul class="clearfix">
                        <li>
                            <figure class=" book-intro">
                                <img src="images/mylibray/book2.png" alt="White Water Lillies" />
                                <figcaption>
                                    <h4>心理营养</h4>
                                    <p>作者：成果</p>
                                    <p>浏览次数:117</p>
                                </figcaption>
                            </figure>
                        </li>
                        <li>
                            <figure class=" book-intro">
                                <img src="images/mylibray/book3.png" alt="White Water Lillies" />
                                <figcaption>
                                    <h4>心理营养</h4>
                                    <p>作者：成果</p>
                                    <p>浏览次数:117</p>
                                </figcaption>
                            </figure>
                        </li>
                        <li class="choosenow">
                            <figure class=" book-intro">
                                <img src="images/mylibray/book2.png" alt="White Water Lillies" />
                                <figcaption>
                                    <h4>心理营养</h4>
                                    <p>作者：成果</p>
                                    <p>浏览次数:117</p>
                                </figcaption>
                            </figure>
                        </li>
                        <li>
                            <figure class=" book-intro">
                                <img src="images/mylibray/book3.png" alt="White Water Lillies" />
                                <figcaption>
                                    <h4>心理营养</h4>
                                    <p>作者：成果</p>
                                    <p>浏览次数:117</p>
                                </figcaption>
                            </figure>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="book-right fr">
                <div class="book-top">
                    <img src="images/mylibray/paihang.png" alt="" /> 搜索排行
                </div>
                <div class="book-table">
                    <table>
                        <thead>
                            <th width="20%">排名</th>
                            <th width="50%">搜索关键词</th>
                            <th width='30%'>搜索次数</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td> <a href="#">乌合之众</a> </td>
                                <td>2,263</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td> <a href="#">自卑与超越</a> </td>
                                <td>2,121</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td><a href="#">显微镜下</a></td>
                                <td>1,233</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td><a href="#">局外人</a></td>
                                <td>1,211</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td><a href="#">或者</a></td>
                                <td>1,002</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td><a href="#">诗经</a></td>
                                <td>952</td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td><a href="#">赐福</a></td>
                                <td>845</td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td><a href="#">九月</a></td>
                                <td>724</td>
                            </tr>
                            <tr>
                                <td>9</td>
                                <td><a href="#">唐璜</a></td>
                                <td>612</td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td><a href="#">呐喊</a></td>
                                <td>155</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="footer visible-lg"></div>
    <script src="js/jquery-2.1.4.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/common.js"></script>
    <script src="js/echarts.common.min.js"></script>
    <script id='jsCode'>
        $(function() {
            $(document).ready(function() {
                //jquery load方法加载公共头部
                $(".header").load("header.html", function() {
                    //echarts图表js
                    var myChartBook = echarts.init(document.getElementById('bookNum'));
                    // 指定图表的配置项和数据
                    var legendArray = ['中外小说', '自然科学', '哲学'];
                    var seriesArray = [{
                        value: 20,
                        name: '中外小说'
                    }, {
                        value: 10,
                        name: '自然科学'
                    }, {
                        value: 20,
                        name: '哲学'
                    }];
                    var optionBook = {
                        tooltip: {
                            trigger: 'item',
                            formatter: " {c} ({d}%)"
                        },
                        legend: {
                            orient: 'vertical',
                            top: '50%',
                            right: "5%",
                            data: legendArray,
                            formatter: function(name) {
                                var total = 0;
                                var target;
                                for (var i = 0, l = seriesArray.length; i < l; i++) {
                                    total += seriesArray[i].value;
                                    if (seriesArray[i].name == name) {
                                        target = seriesArray[i].value;
                                    }
                                }
                                var arr = [];
                                return '{a|' + name + '}' + '{b|' + ((target / total) * 100).toFixed(0) + '%' + '}' + '{b|' + target + '}'
                            },
                            textStyle: {
                                rich: {
                                    a: {
                                        fontSize: 14,
                                        fontFamily: "Source Han Sans CN",
                                        fontWeight: 400,
                                        color: "#333",
                                        lineHeight: 20,
                                        verticalAlign: "top",

                                        padding: [0, 5, 5, 10]
                                    },
                                    b: {
                                        fontSize: 14,
                                        fontFamily: " Source Han Sans CN",
                                        fontWeight: 400,
                                        color: "#999",
                                        padding: [0, 10, 0, 10],
                                        lineHeight: 15
                                    }
                                }
                            }
                        },
                        series: [{
                            name: '',
                            type: 'pie',
                            radius: ['30%', '45%'],
                            label: {
                                normal: {
                                    formatter: '{per|{d}%}  ',
                                    rich: {}
                                }
                            },
                            data: seriesArray,
                            center: ["30%", "50%"],
                        }],
                        //此处需要写入随机颜色
                        color: ["#F78196", "#82CAFF", '#C49BFD']
                    };
                    //时间折线图
                    var myChartTime = echarts.init(document.getElementById('timeNum'));
                    var timeData = ['6-10', '6-11', '6-12', '6-13', '6-14', '6-15', '6-16']
                    optionTime = {
                        tooltip: {
                            trigger: 'item',
                            backgroundColor: "#38C790",
                            position: "top",
                            formatter: "{c}"
                        },
                        xAxis: {
                            type: 'category',
                            data: timeData,
                            axisLine: {
                                lineStyle: {
                                    opacity: 0,
                                }
                            },
                            splitLine: {
                                lineStyle: {
                                    // 使用深浅的间隔色
                                    color: "#CCCCCC",
                                }
                            },
                            axisTick: {
                                show: false
                            },
                            axisLabel: {
                                textStyle: {
                                    color: "#D0D7E3",
                                }
                            }

                        },
                        yAxis: {
                            type: 'value',
                            max: 24,

                            axisLine: {
                                lineStyle: {
                                    opacity: 0,
                                }
                            },
                            splitLine: {
                                lineStyle: {
                                    // 使用深浅的间隔色
                                    color: "#CCCCCC",
                                }
                            },
                            axisTick: {
                                show: false
                            },
                            axisLabel: {
                                textStyle: {
                                    color: "#D0D7E3",
                                }
                            }
                        },
                        series: [{
                            label: {
                                show: true,
                                normal: {
                                    formatter: '{per|{d}%}  ',
                                    rich: {}
                                }
                            },
                            data: [3, 5, 6, 11.5, 13, 18, 24],
                            type: 'line',
                            lineStyle: {
                                color: "#38C790"
                            },
                            itemStyle: {
                                color: "#38C790",
                            },
                        }]
                    };
                    // 使用刚指定的配置项和数据显示图表。
                    myChartBook.setOption(optionBook);
                    myChartTime.setOption(optionTime);
                    //监听媒体查询
                    function myFunction(x) {
                        if (x.matches) { // 媒体查询
                            removejscssfile("rem.js", "js")
                            removejscssfile("mobileHead.js", "js")
                            loadJs('js/head.js')
                            myChartBook.resize()
                            myChartTime.resize()
                        } else {
                            removejscssfile("head.js", "js")
                            loadJs('js/rem.js')
                            loadJs('js/mobileHead.js')
                            myChartBook.resize()
                            myChartTime.resize()
                        }
                    }
                    var x = window.matchMedia("(min-width: 1200px)")
                    myFunction(x) // 执行时调用的监听函数
                    x.addListener(myFunction) // 状态改变时添加监听器                         
                });
                $(".footer").load("footer.html");
            });
            $(".main-serve>ul").on("click", "li", function() {
                $(this)
                    .addClass("action")
                    .siblings()
                    .removeClass("action");
            });


            // 表格全选反选
            $("#number").click(function() {
                var isChecked = $("#number").prop("checked");
                $("#tbody input").prop("checked", isChecked);
                if ($("#tbody input").prop('checked') == true) {
                    $('.allSelect').show()
                } else {
                    $('.allSelect').hide()
                }
            });

            // 单独选项控制全选
            $("#tbody input").click(function() {
                var allLength = $("#tbody input").length;
                var checkedLength = $("#tbody input:checked").length;
                if (allLength == checkedLength) {
                    $("#number").prop("checked", true);
                    $('.allSelect').show()
                } else {
                    $("#number").prop("checked", false);
                    $('.allSelect').hide()
                }
            });
            //点击其中一项时，高亮显示
            $("#tbody").on("click", "tr", function() {
                $(this)
                    .addClass("now")
                    .siblings()
                    .removeClass("now");
            });
            //点击全部续借时，与后台交互，并刷新页面
            $('.allSelect').click(function() {
                    window.location.reload()
                })
                // 单独点击续借时
            $('.detail_tb tr ').on('click', 'button', function() {
                window.location.reload()
            })
            $(".book-main>ul").on("click", "li", function() {
                $(this)
                    .addClass("choosenow")
                    .siblings()
                    .removeClass("choosenow");
            });

        });
    </script>
</body>

</html>